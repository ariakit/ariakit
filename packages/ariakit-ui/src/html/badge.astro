---
import type { HTMLAttributes } from "astro/types";
import { splitProps, type VariantProps } from "clava";
import { badge, badgeIcon, badgeText } from "../styles/badge.ts";

interface Props
  extends
    HTMLAttributes<"div">,
    VariantProps<typeof badge>,
    VariantProps<typeof badgeText> {}

const [variantProps, textProps, rest] = splitProps(
  Astro.props,
  badge.html,
  badgeText.html
);
---

<div {...badge.html(variantProps)} {...rest}>
  {
    Astro.slots.has("iconStart") && (
      <span {...badgeIcon.html({ $position: "start" })}>
        <slot name="iconStart" />
      </span>
    )
  }
  <span {...badgeText.html(textProps)}>
    <slot />
  </span>
  {
    Astro.slots.has("iconEnd") && (
      <span {...badgeIcon.html({ $position: "end" })}>
        <slot name="iconEnd" />
      </span>
    )
  }
</div>
