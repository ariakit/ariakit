---
import type { HTMLAttributes } from "astro/types";
import * as icons from "./icons.ts";

interface Props extends HTMLAttributes<"svg"> {
  name: keyof typeof icons;
}

const hasLabel =
  Astro.props["aria-label"] !== undefined ||
  Astro.props["aria-labelledby"] !== undefined;

const { name, ...props } = Astro.props;
const { html, stroke, replaceId, fill, viewBox = "0 0 24 24" } = icons[name];

let content = html;

if (replaceId) {
  const randomId = Math.random().toString(36).substring(2, 15);
  content = content.replace(/<replace-id-(\d+)>/g, `${randomId}$1`);
}
---

<svg
  {...props}
  viewBox={viewBox}
  width="1em"
  height="1em"
  aria-hidden={!hasLabel || undefined}
  {stroke}
  {fill}
  set:html={content}
  class:list={["base:stroke-[1.5] base:ak-dark:stroke-1", props.class]}
/>
