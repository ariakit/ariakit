<input type="color" data-canvas-color-picker />

<script>
  const inputs = document.querySelectorAll<HTMLInputElement>(
    "[data-canvas-color-picker]"
  );
  let ric = 0;
  inputs?.forEach((input) =>
    input.addEventListener("input", () => {
      const setCanvasColor = () => {
        document.documentElement.style.setProperty(
          "--color-canvas",
          input.value
        );
      };
      if ("requestIdleCallback" in window) {
        cancelIdleCallback(ric);
        ric = requestIdleCallback(setCanvasColor);
      } else {
        setCanvasColor();
      }
    })
  );
</script>
