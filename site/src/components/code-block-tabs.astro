---
import type { CodeBlockProps } from "./code-block.types.ts";
import { CodeBlockContainer, CodeBlockTabPanel } from "./code-block.react.tsx";
import CodeBlockContent from "./code-block-content.astro";

interface Props {
  tabs: CodeBlockProps[];
}

const { tabs } = Astro.props;

const [firstTab] = tabs;

// Random id
const storeId = `code-block-tabs-${Math.random().toString(36).substring(2, 15)}`;
---

<CodeBlockContainer
  client:visible
  {tabs}
  code={firstTab.code}
  maxLines={firstTab.maxLines}
  storeId={storeId}
>
  {
    tabs.map((tab, index) => (
      <CodeBlockTabPanel
        client:visible
        storeId={storeId}
        defaultOpen={index === 0}
      >
        <CodeBlockContent {...tab} />
      </CodeBlockTabPanel>
    ))
  }
</CodeBlockContainer>
